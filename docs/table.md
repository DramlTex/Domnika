# Таблица товаров

Этот документ описывает общую связку HTML, CSS и JavaScript для работы с таблицей товаров (`priceList`).

## HTML

Таблица располагается в файле `Price/index.php` внутри блоков `.table-wrapper` и `.table-scroll`:

```html
<div class="table-wrapper">
  <div class="table-scroll">
    <table id="priceList">
      <thead>...</thead>
      <tbody></tbody>
    </table>
  </div>
</div>
```

Количество колонок фиксировано и используется в скрипте. Для добавления новых колонок необходимо скорректировать функции из `table.js` и стили в `table.css`.

## CSS

Основные стили таблицы находятся в `Price/css/table.css`. Для выделения групп товаров по странам добавлен класс `.country-row`, который окрашивает строку и делает текст полужирным.
Дополнительный класс `.type-row` применяется для заголовков типов внутри каждой страны.

Также ячейки колонок "Тип" и "Страна" помечены классами `.type-cell` и `.country-cell` для более заметного форматирования текста.

```css
.country-row td {
  background-color: #f2f2f2;
  font-weight: bold;
  text-align: center;
  font-size: 18px;
}

.type-row td {
  background-color: #fafafa;
  font-style: italic;
  text-align: center;
  font-size: 16px;
}

.type-cell {
  font-style: italic;
  color: #285682;
}

.country-cell {
  font-weight: bold;
  color: #333;
}
```

## JavaScript

Логика заполнения таблицы располагается в файле `Price/js/table.js`.
Ключевые функции:

- `fillTable(data)` – рендерит таблицу постранично, группирует товары по странам и при смене типа внутри страны вставляет строку‑заголовок.
- `fillFilters(data)` – заполняет выпадающие списки фильтров и сортирует страны в нужном порядке.

Порядок стран задаётся массивом `COUNTRY_ORDER` в начале файла. При необходимости его можно расширить или изменить:

```javascript
const COUNTRY_ORDER = [
  'ИНДИЯ',
  'ЦЕЙЛОН',
  'ИРАН',
  'ВЬЕТНАМ',
  'КИТАЙ',
  'КЕНИЯ',
  'ЕГИПЕТ',
  'НИГЕРИЯ',
  'ЮЖНАЯ АФРИКА'
];

// для сортировки типов используйте аналогичный массив
const TYPE_ORDER = [];
```

Начиная с версии 2025‑05‑27 сортировка не зависит от регистра и лишних
пробелов в названии страны. В коде применяется функция `normalizeCountry`,
которая переводит каждое значение в верхний регистр и убирает пробелы по
краям перед сравнением с `COUNTRY_ORDER`.

Для примера в файле присутствует закомментированная функция `sortByCustomCountryOrder`, показывающая как можно отсортировать данные в произвольном порядке.

Начиная с версии 2025-06-02 для окончательной сортировки товаров внутри типа
используется название, а не артикул. Это отражено в функции `sortByCountry`,
где `a.name.localeCompare(b.name)` сравнивает позиции с одинаковыми типами и
страной.

