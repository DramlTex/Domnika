# DOCUMENTATION

## Краткое введение

Проект представляет собой набор PHP-скриптов для интеграции с сервисом "МойСклад" и веб-интерфейс для отображения прайс‑листа. Основная логика расположена в каталоге `Price`, также присутствуют вспомогательные скрипты в корне репозитория. Расширенная документация по коду хранится в каталоге `docs`.

## Архитектура приложения

- **`product.php`** – CLI‑скрипт для выгрузки товаров из API и сохранения отфильтрованного списка в `output/filtered_products.json`.
- **`output/update.php`** – обновляет товары в "МойСклад" добавляя недостающие упаковки.
- **Каталог `Price`** – веб‑интерфейс прайс‑листа и система авторизации.
  - `login.php`, `admin.php`, `index.php` – основные страницы.
  - `data.php` – загрузка данных из API с учётом складов.
  - `export.php` – экспорт текущего прайса в Excel с использованием `phpoffice/phpspreadsheet`.
  - `config.php` – хранит учётные данные для API.

## Структура каталога

```
/Price          – веб‑интерфейс и вспомогательные файлы
/output         – JSON‑файлы и скрипты обновления
scripts/        – утилиты для установки, тестирования и запуска
product.php     – утилита загрузки товаров
composer.json   – зависимости проекта
docs/           – дополнительная документация (PHP, JS, HTML, CSS)
```

## Установка

Требуется PHP 8 и Composer. Запустите скрипт:

```bash
scripts/install.sh
```

Он установит PHP‑зависимости, определённые в `composer.json`.

## Настройка окружения

1. Укажите логин и пароль для "МойСклад" в файле `Price/config.php`.
2. При необходимости скорректируйте пути в `product.php` и `output/update.php`.

## Запуск приложения

Локальный веб‑сервер можно запустить командой:

```bash
scripts/start.sh
```

После запуска интерфейс будет доступен на `http://localhost:8000/`.

## Запуск и тестирование

Для запуска тестов (если они появятся) используйте:

```bash
scripts/test.sh
```

По умолчанию скрипт выводит сообщение о том, что тесты не настроены.

## Правила фиксации изменений

- Перед коммитом проверяйте изменённые PHP‑файлы командой `php -l <file>`.
- Описывайте в сообщениях коммитов найденные и исправленные ошибки.

## История изменений

- Изначальная версия документа.
- 2025-05-22 15:51 Price/index.php, docs/css_index.md – добавлена документация по CSS.

## Рекомендации по улучшению

- Добавить автоматические тесты и линтеры.
- Настроить CI для проверки и деплоя.

